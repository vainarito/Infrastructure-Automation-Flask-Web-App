# Архитектурная схема

![Архитектурная схема](images/architecture_diagram.png)

## Компоненты инфраструктуры

- **Сервер**: Ubuntu
  - Базовая операционная система для размещения всех компонентов.

- **Firewall (UFW/firewalld)**:
  - Контролирует сетевой трафик.
  - Открыт порт 80 для веб-трафика.
  - Открыт порт 22 для SSH-подключений.

- **Веб-сервер (Nginx)**:
  - Работает на порту 80.
  - Настроен виртуальный хост test.local.
  - Работает как reverse proxy для Flask-приложения.

- **Flask Application**:
  - Работает на порту 5000.
  - Запущено через systemd-сервис или Docker.
  - Доступно только локально, через Nginx.

- **База данных (SQLite)**:
  - Файл database.db.
  - Регулярное резервнре копирование в /home/devops/backups/.

## Режимы запуска

### Режим 1: systemd

- Flask-приложение запускается как systemd-сервис
- Nginx настроен как reverse proxy

### Режим 2: Docker

- Flask-приложение запускается в Docker-контейнере
- Nginx запускается в отдельном контейнере
- Контейнеры управляются через docker-compose

## Диаграмма потока данных

1. Запрос пользователя → Firewall → Nginx → Flask → SQLite
2. Ответ Flask → Nginx → Firewall → Пользователь

## Мониторинг и логирование

- Мониторинг через Bash-скрипты и cron
- Логирование в отдельные файлы в /var/log/
- Ротация логов через logrotate